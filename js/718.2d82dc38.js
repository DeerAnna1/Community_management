"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[718],{5718:function(t,i,e){e.r(i),e.d(i,{default:function(){return c}});var a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"main-content"},[i("div",{staticStyle:{width:"60%",margin:"20px auto"}},[i("div",{staticStyle:{color:"#333333","font-size":"20px","font-weight":"700"}},[t._v(t._s(t.activityData.name)+" "),i("el-button",{attrs:{type:"primary"},on:{click:t.init}},[t._v("参与活动")])],1),i("div",{staticStyle:{"margin-top":"10px",color:"#767474"}},[i("span",{staticStyle:{"font-weight":"600",color:"#404040"}},[i("a",{attrs:{href:"#"},on:{click:function(i){return t.navTo("/front/DepartmentDetail?id="+t.activityData.departmentId)}}},[t._v(" "+t._s(t.activityData.departmentName))])]),i("span",{staticStyle:{"margin-left":"50px"}},[t._v("开始时间："+t._s(t.activityData.time))]),i("span",{staticStyle:{"margin-left":"50px"}},[t._v("结束时间："+t._s(t.activityData.timeEnd))])]),i("div",{staticStyle:{"margin-top":"30px"},domProps:{innerHTML:t._s(t.activityData.description)}}),i("div",{staticStyle:{"margin-top":"50px","font-size":"18px"}},[t._v("欢迎评论~")]),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.content,callback:function(i){t.content=i},expression:"content"}})],1),i("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.submit(t.content)}}},[t._v("提交")])],1),i("div",{staticStyle:{"margin-top":"30px","margin-bottom":"500px"}},t._l(t.commentData,(function(e){return i("el-row",{staticStyle:{"margin-bottom":"50px"}},[i("el-col",{attrs:{span:4}},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("img",{staticStyle:{width:"30px",height:"30px","border-radius":"50%"},attrs:{src:e.userAvatar,alt:""}}),i("div",{staticStyle:{flex:"1","margin-left":"10px","font-size":"18px"}},[t._v(t._s(e.userName))])])]),i("el-col",{attrs:{span:20}},[i("div",{staticStyle:{height:"50px","line-height":"50px"}},[i("el-row",[i("el-col",{staticStyle:{"font-size":"18px"},attrs:{span:18}},[t._v(t._s(e.content))]),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t._v(t._s(e.time))])],1)],1)])],1)})),1)]),i("el-dialog",{attrs:{title:"是否确认参与",visible:t.fromVisible,width:"40%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(i){t.fromVisible=i}}},[i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(i){t.fromVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确 定")])],1)])],1)},s=[],n={data(){let t=this.$route.query.id,i=this.$route.query.id;return{user:JSON.parse(localStorage.getItem("user")||"{}"),activityData:{},activityId:t,departmentData:{},departmentId:i,fromVisible:!1,content:null,commentData:[]}},mounted(){this.loadActivity(),this.loadComment()},methods:{submit(t){let i={userId:this.user.id,activityId:this.activityId,content:t};this.$request.post("/comment/add",i).then((t=>{"200"===t.code?(this.$notify.success("评论成功"),this.content=null,this.loadComment()):this.$notify.error(t.msg)}))},loadComment(){this.$request.get("/comment/selectAll?activityId="+this.activityId).then((t=>{"200"===t.code?this.commentData=t.data:this.$notify.error(t.msg)}))},loadActivity(){this.$request.get("/activity/selectById/"+this.activityId).then((t=>{"200"===t.code?this.activityData=t.data:this.$notify.error(t.msg)}))},navTo(t){location.href=t},init(){this.fromVisible=!0},save(){let t={userId:this.user.id,departmentId:this.activityData.departmentId,activityId:this.activityId,time:(new Date).getTime()};this.$request.post("/participation/add",t).then((t=>{"200"===t.code?(this.$notify.success("报名参与成功！"),this.fromVisible=!1):this.$notify.error(t.msg)}))}}},o=n,r=e(1656),l=(0,r.A)(o,a,s,!1,null,null,null),c=l.exports}}]);
//# sourceMappingURL=718.2d82dc38.js.map